<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SORA UNLIMITED</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { background:#000; color:#fff; min-height:100vh; display:flex; justify-content:center; align-items:center; font-family:sans-serif; padding:20px; }
.box { background:#080808; border-radius:30px; padding:30px; width:100%; max-width:420px; border:1px solid #1a1a1a; }
.tabs { display:flex; gap:10px; margin-bottom:25px; background:#111; padding:5px; border-radius:18px; }
.tab { flex:1; padding:12px; border-radius:14px; cursor:pointer; text-align:center; font-weight:800; color:#444; }
.tab.active { background:#7c3aed; color:#fff; box-shadow:0 4px 15px rgba(124,58,237,0.3); }
textarea { width:100%; background:#0f0f0f; border-radius:18px; padding:18px; color:#fff; margin-bottom:20px; border:1px solid #222; resize:none; }
.btn { width:100%; padding:18px; border-radius:18px; font-weight:900; cursor:pointer; background:linear-gradient(135deg,#7c3aed,#4f46e5); border:none; }
#res img, #res video { width:100%; border-radius:25px; margin-top:25px; border:1px solid #333; }
</style>
</head>
<body>

<div class="box">
<h1 class="text-center text-2xl font-black mb-6">SORA <span class="text-purple-500">UNLIMITED</span></h1>

<div class="tabs">
<div id="i" class="tab active" onclick="setMode('image')">ØµÙˆØ± ğŸ–¼ï¸</div>
<div id="v" class="tab" onclick="setMode('video')">ÙÙŠØ¯ÙŠÙˆ ğŸ¬</div>
</div>

<textarea id="prompt" rows="3" placeholder="Ø§ÙƒØªØ¨ ÙˆØµÙÙƒ Ù‡Ù†Ø§..."></textarea>
<button class="btn" onclick="run()">Ø¨Ø¯Ø¡ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ âš¡</button>

<div id="res"></div>
</div>

<script>
let mode = "image";

function setMode(m){
    mode = m;
    document.getElementById("i").className = m==="image"?"tab active":"tab";
    document.getElementById("v").className = m==="video"?"tab active":"tab";
}

async function run() {
    const prompt = document.getElementById("prompt").value;
    if(!prompt) return alert("Ø§ÙƒØªØ¨ ÙˆØµÙÙƒ");

    const resDiv = document.getElementById("res");
    resDiv.innerHTML = "Ø¬Ø§Ø±Ù Ø§Ù„ØªÙˆÙ„ÙŠØ¯... ğŸ”„";

    if(mode === "image") {
        // ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ù…Ù† Pollinations
        const seed = Math.floor(Math.random()*999999);
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt + ", masterpiece, 8k")}?seed=${seed}&width=512&height=512`;
        resDiv.innerHTML = `<img src="${url}">`;
    } else {
        // ØªÙˆÙ„ÙŠØ¯ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Runway API
        try {
            const response = await fetch("https://api.runwayml.com/v1/engines/gen-3-beta/video", {
                method:"POST",
                headers: {
                    "Authorization":"Bearer key_dbd7214b39be7b319f7e72c0d7b89bbf555...", // Ø¶Ø¹ Ù…ÙØªØ§Ø­Ùƒ ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§
                    "Content-Type":"application/json"
                },
                body: JSON.stringify({
                    prompt: prompt,
                    duration: 4,
                    width: 512,
                    height: 512,
                    frames_per_second: 15
                })
            });

            const data = await response.json();

            if(data.video_base64){
                const videoBlob = b64toBlob(data.video_base64, "video/mp4");
                const videoURL = URL.createObjectURL(videoBlob);
                resDiv.innerHTML = `<video controls autoplay loop><source src="${videoURL}" type="video/mp4"></video>`;
            } else {
                resDiv.innerHTML = "ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ âŒ";
            }
        } catch(e){
            console.error(e);
            resDiv.innerHTML = "ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… Runway âŒ";
        }
    }
}

// ØªØ­ÙˆÙŠÙ„ base64 Ø¥Ù„Ù‰ Blob
function b64toBlob(b64Data, contentType='', sliceSize=512){
    const byteCharacters = atob(b64Data);
    const byteArrays = [];
    for(let offset=0; offset < byteCharacters.length; offset+=sliceSize){
        const slice = byteCharacters.slice(offset, offset+sliceSize);
        const byteNumbers = new Array(slice.length);
        for(let i=0;i<slice.length;i++) byteNumbers[i]=slice.charCodeAt(i);
        const byteArray = new Uint8Array(byteNumbers);
        byteArrays.push(byteArray);
    }
    return new Blob(byteArrays, {type: contentType});
}
</script>

</body>
</html>
