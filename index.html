<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SORA AI ULTRA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: #0d0d0d; border: 1px solid #1a1a1a; border-radius: 24px; width: 90%; max-width: 400px; padding: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .btn { background: #7c3aed; color: #fff; padding: 14px; border-radius: 12px; width: 100%; font-weight: bold; margin-top: 15px; cursor: pointer; border: none; transition: 0.2s; }
        .btn:active { transform: scale(0.95); opacity: 0.8; }
        #loader { display: none; color: #7c3aed; font-size: 12px; margin-top: 15px; text-align: center; }
        img { width: 100%; border-radius: 16px; border: 1px solid #333; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="card text-center">
        <h1 class="text-xl font-black mb-6 text-purple-500">SORA AI ULTRA</h1>
        <textarea id="p" class="w-full bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-white outline-none mb-2" rows="3" placeholder="اكتب وصفك هنا..."></textarea>
        <button id="b" onclick="generate()" class="btn">إنشاء المشهد الآن ✨</button>
        <div id="loader" class="animate-pulse">جاري التحميل من السيرفر المستقر...</div>
        <div id="out"></div>
    </div>

    <script>
        function generate() {
            const prompt = document.getElementById('p').value;
            const btn = document.getElementById('b');
            const loader = document.getElementById('loader');
            const out = document.getElementById('out');

            if (!prompt) return;

            btn.disabled = true;
            loader.style.display = "block";
            out.innerHTML = "";

            const seed = Math.floor(Math.random() * 100000);
            // تغيير السيرفر لمحرك أكثر استقراراً لضمان عدم ظهور "السيرفر مضغوط"
            const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?width=1024&height=1024&seed=${seed}&nologo=true`;

            const img = new Image();
            img.src = url;

            img.onload = function() {
                out.innerHTML = `<img src="${url}">`;
                loader.style.display = "none";
                btn.disabled = false;
            };

            img.onerror = function() {
                loader.innerText = "السيرفر استغرق وقتاً، جارٍ المحاولة تلقائياً...";
                setTimeout(() => { img.src = url + "&retry=true"; }, 2000);
            };
        }
    </script>
</body>
</html>
